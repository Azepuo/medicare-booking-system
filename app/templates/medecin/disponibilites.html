{% extends "medecin/base.html" %}

{% block title %}Disponibilités • Médecin{% endblock %}

{% block body_id %}dispo-page{% endblock %}

{% block content %}
<div class="header-row">
  <h1 class="h1">Gestion des Disponibilités</h1>
  <button class="btn" onclick="showAddForm()">
    <i class="fas fa-plus"></i> Ajouter
  </button>
</div>

<!-- Formulaire d'ajout -->
<div class="card" id="addForm" style="display: none; margin-bottom: 20px;">
  <h3>Nouvelle Disponibilité</h3>
  <div class="form-row">
    <div class="form-group">
      <label class="form-label">Jour</label>
      <select class="input" id="jourSelect">
        <option value="lundi">Lundi</option>
        <option value="mardi">Mardi</option>
        <option value="mercredi">Mercredi</option>
        <option value="jeudi">Jeudi</option>
        <option value="vendredi">Vendredi</option>
        <option value="samedi">Samedi</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">De</label>
      <input type="time" class="input" id="heureDebut" />
    </div>
    <div class="form-group">
      <label class="form-label">À</label>
      <input type="time" class="input" id="heureFin" />
    </div>
    <div class="form-group" style="align-self: flex-end;">
      <button class="btn" onclick="addDisponibilite()">
        <i class="fas fa-save"></i> Enregistrer
      </button>
    </div>
  </div>
</div>

<!-- Liste des disponibilités -->
<div class="card">
  <table class="table">
    <thead>
      <tr>
        <th>Jour</th>
        <th>Heure Début</th>
        <th>Heure Fin</th>
        <th>Créneau</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Lundi</td>
        <td>08:30</td>
        <td>12:00</td>
        <td>3h30</td>
        <td>
          <button class="btn secondary" onclick="editDisponibilite(1)">
            <i class="fas fa-edit"></i> Modifier
          </button>
        </td>
      </tr>
      <tr>
        <td>Lundi</td>
        <td>14:00</td>
        <td>18:00</td>
        <td>4h00</td>
        <td>
          <button class="btn secondary" onclick="editDisponibilite(2)">
            <i class="fas fa-edit"></i> Modifier
          </button>
        </td>
      </tr>
      <tr>
        <td>Mardi</td>
        <td>09:00</td>
        <td>17:00</td>
        <td>8h00</td>
        <td>
          <button class="btn secondary" onclick="editDisponibilite(3)">
            <i class="fas fa-edit"></i> Modifier
          </button>
        </td>
      </tr>
      <tr>
        <td>Mercredi</td>
        <td>08:00</td>
        <td>12:30</td>
        <td>4h30</td>
        <td>
          <button class="btn secondary" onclick="editDisponibilite(4)">
            <i class="fas fa-edit"></i> Modifier
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Résumé hebdomadaire -->
<div class="grid" style="margin-top: 20px;">
  <div class="card">
    <h3>Heures/Semaine</h3>
    <p>35h</p>
  </div>
  <div class="card">
    <h3>Jours Travaillés</h3>
    <p>5</p>
  </div>
  <div class="card">
    <h3>Prochains RDV</h3>
    <p>12</p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function showAddForm() {
  document.getElementById('addForm').style.display = 'block';
}

function addDisponibilite() {
  const jour = document.getElementById('jourSelect').value;
  const debut = document.getElementById('heureDebut').value;
  const fin = document.getElementById('heureFin').value;
  
  if (!debut || !fin) {
    alert('Veuillez remplir tous les champs');
    return;
  }
  
  alert(`Nouvelle disponibilité ajoutée: ${jour} de ${debut} à ${fin}`);
  document.getElementById('addForm').style.display = 'none';
  // Ici, vous feriez un appel API pour sauvegarder
}

function editDisponibilite(id) {
  alert(`Modification de la disponibilité #${id}`);
  // Ouvrir un formulaire de modification
}

function deleteDisponibilite(id) {
  if (confirm('Supprimer cette disponibilité ?')) {
    alert(`Disponibilité #${id} supprimée`);
    // Ici, vous feriez un appel API pour supprimer
  }
}
</script>
{% endblock %}
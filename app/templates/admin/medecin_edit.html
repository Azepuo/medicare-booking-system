{% extends 'admin/base.html' %}
{% block title %}HealthAdmin - Modifier médecin{% endblock %}
{% block content %}

<!-- SIDEBAR -->
<section id="sidebar">
    <a href="#" class="brand">
        <i class='bx bxs-smile'></i>
        <span class="text">HealthAdmin</span>
    </a>
    <ul class="side-menu top">
        <li>
            <a href="/admin/dashboard">
                <i class='bx bxs-dashboard'></i>
                <span class="text">Dashboard</span>
            </a>
        </li>
        <li class="active">
            <a href="{{ url_for('medecins_bp.liste_medecins') }}">
                <i class='bx bxs-user-pin'></i>
                <span class="text">Médecin</span>
            </a>
        </li>
        <li>
            <a href="/admin/patients">
                <i class='bx bx-user'></i>
                <span class="text">Patients</span>
            </a>
        </li>
        <li>
            <a href="/admin/rendez_vous">
                <i class='bx bxs-calendar'></i>
                <span class="text">Rendez-vous</span>
            </a>
        </li>
        <li>
            <a href="/admin/facturation/">
                <i class='bx bxs-receipt'></i>
                <span class="text">Facturation</span>
            </a>
        </li>
    </ul>
    <ul class="side-menu">
        <li>
            <a href="/admin/account">
                <i class='bx bxs-id-card'></i>
                <span class="text">Mon compte</span>
            </a>
        </li>
        <li>
            <a href="http://127.0.0.1:5000/logout" class="logout">
                <i class='bx bxs-log-out-circle'></i>
                <span class="text">Déconnexion</span>
            </a>
        </li>
    </ul>
</section>
<!-- SIDEBAR -->

<!-- CONTENT -->
<section id="content">
    <!-- NAVBAR -->
    <nav>
        <i class='bx bx-menu'></i>

        <form action="#">
            <!-- <div class="form-input">
                    <input type="search" placeholder="Search...">
                    <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
                </div> -->
        </form>
        <input type="checkbox" id="switch-mode" hidden>
        <label for="switch-mode" class="switch-mode"></label>
        <a href="#" class="notification">
            <i class='bx bxs-bell'></i>
            <span class="num">8</span>
        </a>
        <a href="#" class="profile">
            <img src="{{ url_for('static', filename='uploads/' ~ admin.photo) }}">

        </a>
    </nav>
    <!-- NAVBAR -->

    <!-- MAIN -->
    <main>
        <div class="head-title">
            <div class="left">
                <h1>Modifier un médecin</h1>
                <ul class="breadcrumb">
                    <li><a href="/admin/dashboard">Dashboard</a></li>
                    <li><i class='bx bx-chevron-right'></i></li>
                    <li><a href="{{ url_for('medecins_bp.liste_medecins') }}">Médecins</a></li>
                    <li><i class='bx bx-chevron-right'></i></li>
                    <li><a class="active" href="#">Modifier</a></li>
                </ul>
            </div>
        </div>

        <div class="form-wrapper">
            <div class="form-card form-card-medium">
                <h2 style="font-size:16px;font-weight:600;margin-bottom:14px;">Informations du médecin</h2>

                <!-- action : route du blueprint pour éditer -->
                <form action="{{ url_for('medecins_bp.editer_medecin', medecin_id=medecin.id) }}" method="POST">
                    <div class="form-grid">

                        <!-- ✅ Nom complet -->
                        <div class="field">
                            <label for="nom_complet">Nom complet</label>
                            <input type="text" id="nom_complet" name="nom_complet" value="{{ medecin.nom }}" required>
                        </div>

                        <!-- ✅ Email -->
                        <div class="field">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" value="{{ medecin.email }}" required>
                        </div>

                        <!-- ✅ Téléphone -->
                        <div class="field">
                            <label for="telephone">Téléphone</label>
                            <input type="text" id="telephone" name="telephone" value="{{ medecin.telephone }}" required>
                        </div>

                        <!-- ✅ Spécialisation (FK) -->
                        <div class="field">
                            <label for="id_specialisation">Spécialité</label>
                            <select id="id_specialisation" name="id_specialisation" required>
                                <option value="" disabled>-- Choisir une spécialité --</option>
                                {% for s in specialisations %}
                                <option value="{{ s.id }}" {% if s.id==medecin.id_specialisation %}selected{% endif %}>
                                    {{ s.nom }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>

                        <!-- ✅ Tarif consultation -->
                        <div class="field">
                            <label for="tarif">Tarif consultation (DH)</label>
                            <input type="number" id="tarif" name="tarif_consultation" min="0" step="0.01"
                                value="{{ medecin.tarif_consultation }}" required>
                        </div>

                        <!-- ✅ Statut -->
                        <div class="field">
                            <label for="statut">Statut</label>
                            <select id="statut" name="statut" required>
                                <option value="Actif" {% if medecin.statut=='Actif' %}selected{% endif %}>
                                    Actif
                                </option>
                                <option value="En congé" {% if medecin.statut=='En congé' %}selected{% endif %}>
                                    En congé
                                </option>
                                <option value="Inactif" {% if medecin.statut=='Inactif' %}selected{% endif %}>
                                    Inactif
                                </option>
                            </select>
                        </div>

                    </div>

                    <div class="form-actions">
                        <a href="{{ url_for('medecins_bp.liste_medecins') }}" class="btn-secondary">Annuler</a>
                        <button type="submit" class="btn-primary">Enregistrer les modifications</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- MAIN -->
</section>
<!-- CONTENT -->

{% endblock %}